/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define([],t):e.TIMINGSRC=t()})(this,function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.slice(0,v.length-1).concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){var n=p.call(arguments,0);return typeof n[0]!="string"&&n.length===1&&n.push(null),s.apply(r,n.concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../build/almond",function(){}),n("util/eventutils",[],function(){"use strict";var e=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return function(n){n=n||e;var r="";for(var i=0;i<n;i++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}}(10);Array.prototype.concatAll=function(){var e=[];return this.forEach(function(t){e.push.apply(e,t)},this),e},Array.prototype.concatMap=function(e,t){return this.map(function(n){return e.call(t,n)}).concatAll()};var t=function(t,n){return t._ID=e(4),t._callbacks={},t._callbacks.events=[],t._callbacks.events._options={init:!0},n._defineEvent=function(e,t){if(e==="events")throw new Error("Illegal event type : 'events' is protected");t=t||{},t.init=t.init===undefined?!1:t.init,this._callbacks[e]=[],this._callbacks[e]._options=t},n._makeInitialEvents=function(e){var t;return e!=="events"?t=[e]:t=Object.keys(this._callbacks).filter(function(e){return e!=="events"},this),t.concatMap(function(e){return this._makeInitEvents(e).map(function(t){return{type:e,e:t}},this)},this)},n._internalEventFormatter=function(e,t){return this._eventFormatter?e==="events"?t.map(function(e){return{type:e.type,e:this._eventFormatter(e.type,e.e)}},this):this._eventFormatter(e,t):t},n._internalCallbackFormatter=function(e,t,n){return this._callbackFormatter?this._callbackFormatter(e,t,n):[e,t,n]},n._triggerEvents=function(e,t){if(e===undefined)throw new Error("Illegal event type; undefined");if(e==="events")throw new Error("Illegal event type; triggering of events on protocted event type 'events'");if(t.length===0)throw new Error("eList empty");var n=t.map(function(t){return{type:e,e:t}},this);n.forEach(function(t){this._internalTriggerEvent(e,t)},this),this._internalTriggerEvents("events",n)},n._triggerEvent=function(e,t){return this._triggerEvents(e,[t]),this},n._internalTriggerEvents=function(e,t,n){e==="events"?this._internalTriggerEvent("events",{type:"events",e:t},n):t.forEach(function(e){this._internalTriggerEvent(e.type,e,n)},this)},n._internalTriggerEvent=function(e,t,n){var r,i,s={};if(!this._callbacks.hasOwnProperty(e))throw new Error("Unsupported event type "+e);var o=this._callbacks[e]._options.init;return this._callbacks[e].forEach(function(u){if(n===undefined){if(u["_init_pending_"+e+this._ID])return!1}else{if(u!==n)return!1;s.init=!0,n["_init_pending_"+e+this._ID]=!1}o&&(s.init=u===n?!0:!1),s.count=u["_count_"+e+this._ID],s.src=this,i=this._internalEventFormatter(t.type,t.e),r=this._internalCallbackFormatter(e,i,s);try{return u.apply(u["_ctx_"+e+this._ID],r),u["_count_"+e+this._ID]+=1,!0}catch(a){console.log("Error in "+e+": "+u+": ",a)}},this),!1},n.on=function(e,t,n){if(!t||typeof t!="function")throw new Error("Illegal handler");if(!this._callbacks.hasOwnProperty(e))throw new Error("Unsupported event type "+e);var r=this._callbacks[e].indexOf(t);if(r===-1){this._callbacks[e].push(t),t["_ctx_"+e+this._ID]=n||this,t["_count_"+e+this._ID]=0;if(this._callbacks[e]._options.init){t["_init_pending_"+e+this._ID]=!0;var i=this;setTimeout(function(){var n=i._makeInitialEvents(e);n.length>0?i._internalTriggerEvents(e,n,t):t["_init_pending_"+e+i._ID]=!1},0)}}return this},n.off=function(e,t){if(this._callbacks[e]!==undefined){var n=this._callbacks[e].indexOf(t);n>-1&&this._callbacks[e].splice(n,1)}return this},t};return{eventify:t}});if(typeof module!="undefined"&&t.main===module){var r=t("./eventify"),i=function(){this.name="source",this.value=0,r(i.prototype),this._defineEvent("change",{init:!0})};i.prototype._makeInitEvents=function(e){return e==="change"?[{value:this.value}]:[]},i.prototype._eventFormatter=function(e,t){return t},i.prototype._callbackFormatter=function(e,t,n){return e==="change"?[{type:e,data:t}]:[e,t,n]},i.prototype.inc=function(){this.value+=1,this._triggerEvents("change",[{value:this.value}])};var s=function(e){this.name="target"};s.prototype.handler=function(e){console.log(e)};var o=new s,u=new i;u.on("change",o.handler,o);var a=function(e,t,n){console.log(e,t,n)};u.on("events",a),setTimeout(function(){u.inc()},100)}return n("util/motionutils",[],function(){"use strict";var e=function(){return performance.now()/1e3},t=function(){return performance.now()},n=function(t,n){n===undefined&&(n=e());var r=n-t.timestamp;return{position:t.position+t.velocity*r+.5*t.acceleration*r*r,velocity:t.velocity+t.acceleration*r,acceleration:t.acceleration,timestamp:n}},r=function(e,t){if(e>t)return 1;if(e===t)return 0;if(e<t)return-1},i=function(e,t){var i=n(e,t),s=r(i.velocity,0);return s===0&&(s=r(e.acceleration,0)),s},s=function(e,t,n,r){return Math.pow(t,2)-2*n*(e-r)>=0?!0:!1},o=function(e,t,n,r){if(n===0&&t===0)return e!=r?[]:[0];if(n===0)return[(r-e)/t];if(s(e,t,n,r)===!1)return[];var i=t*t-2*n*(e-r);if(i===0)return[-t/n];var o=Math.sqrt(Math.pow(t,2)-2*n*(e-r)),u=(-t+o)/n,a=(-t-o)/n;return[Math.min(u,a),Math.max(u,a)]},u=function(e,t,n,r){var i=o(e,t,n,r);return i.length===0?[]:i.length==1?i[0]>0?[i[0]]:[]:i.length==2?i[1]<0?[]:i[0]>0?[i[0],i[1]]:i[1]>0?[i[1]]:[]:[]},a=function(e,t,n,r){var i=u(e,t,n,r);return i.length===0?null:i[0]},f=function(e,t){var n=e.position,r=e.velocity,i=e.acceleration,s=a(n,r,i,t[0]),o=a(n,r,i,t[1]);return s!==null&&o!==null?s<o?[s,t[0]]:[o,t[1]]:s!==null?[s,t[0]]:o!==null?[o,t[1]]:[null,null]},l=function(e,t){return e[0]-t[0]},c=function(e,t,n){var r=[],i=e.position,s=e.velocity,u=e.acceleration;for(var a=0;a<n.length;a++){var f=n[a],c=o(i,s,u,f.point);for(var h=0;h<c.length;h++){var p=c[h];0<=p&&p<=t&&r.push([p,f])}}return r.sort(l),r},h=function(e,t){var n=e.position,r=e.velocity,i=e.acceleration,s=n+r*t+.5*i*t*t;if(i!==0){var o=-r/i;if(0<=o&&o<=d){var u=n-.5*r*r/i;return i>0?[u,Math.max(n,s)]:[Math.min(n,s),u]}}return new([Math.min(n,s),Math.max(n,s)])};return{msClock:t,secClock:e,calculateVector:n,calculateDirection:i,calculateDelta:f,calculateInterval:h,calculateSolutionsInInterval:c}}),n("timingobject/timingbase",["util/eventutils","util/motionutils"],function(e,t){"use strict";var n=Object.freeze({INIT:"init",INSIDE:"inside",OUTSIDE_LOW:"outsidelow",OUTSIDE_HIGH:"outsidehigh"}),r=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.uber=t.prototype,e.prototype.constructor=e},i=function(t){this._version=3,this._options=t||{},this._options.hasOwnProperty("timeout")||(this._options.timeout=!1),this._vector=null,this._range=null,this._timeout=null,this._tid=null,e.eventify(this,i.prototype),this._defineEvent("change",{init:!0}),this._defineEvent("timeupdate",{init:!0})};Object.defineProperty(i.prototype,"version",{get:function(){return this._version}}),Object.defineProperty(i.prototype,"range",{get:function(){return this._range===null?null:[this._range[0],this._range[1]]}}),Object.defineProperty(i.prototype,"vector",{get:function(){return this._vector===null?null:{position:this._vector.position,velocity:this._vector.velocity,acceleration:this._vector.acceleration,timestamp:this._vector.timestamp}}}),i.prototype._makeInitEvents=function(e){var t=this.query();return e==="change"?t!==null?[undefined]:[]:e==="timeupdate"?t!==null?[undefined]:[]:[]},i.prototype._callbackFormatter=function(e,t,n){return[t]},i.prototype.query=function(){return this.vector===null?null:t.calculateVector(this.vector)},i.prototype.update=function(e){},i.prototype._getRange=function(){return null},i.prototype._preProcess=function(e){this._range===null&&(this._range=this._getRange());var e=this._onChange(e);this._process(e)},i.prototype._onChange=function(e){return e},i.prototype._renewTimeout=function(){if(this._options.timeout===!0){this._clearTimeout();var e=this._calculateTimeoutVector();if(e===null)return;this._timeout={vector:e},this._internalTimeout()}},i.prototype._calculateTimeoutVector=function(){return null},i.prototype._clearTimeout=function(){this._timeout!==null&&(clearTimeout(this._timeout.tid),this._timeout=null)},i.prototype._internalTimeout=function(){if(this._timeout===null)return;var e=this._timeout.vector,n=e.timestamp-t.secClock();if(n>0){var r=this;this._timeout.tid=setTimeout(function(){r._internalTimeout()},n*1e3);return}e=this._onTimeout(e),this._process(e)},i.prototype._onTimeout=function(e){return e},i.prototype._process=function(e){e!==null&&(this._vector=e,this._postProcess(this.vector)),this._renewTimeout()},i.prototype._postProcess=function(e){this._triggerEvent("change"),this._triggerEvent("timeupdate");var t=e.velocity!==0||e.acceleration!==0;if(t&&this._tid===null){var n=this;this._tid=setInterval(function(){n._triggerEvent("timeupdate")},200)}else!t&&this._tid!==null&&(clearTimeout(this._tid),this._tid=null)},i.prototype._getCorrectRangeState=function(e){var t=e.position,r=e.velocity,i=e.acceleration;if(t>this._range[1])return n.OUTSIDE_HIGH;if(t<this._range[0])return n.OUTSIDE_LOW;if(t===this._range[1]){if(r>0)return n.OUTSIDE_HIGH;if(r===0&&i>0)return n.OUTSIDE_HIGH}else if(t===this._range[0]){if(r<0)return n.OUTSIDE_LOW;if(r==0&&i<0)return n.OUTSIDE_HIGH}return n.INSIDE},i.prototype._checkRange=function(e){var t=this._getCorrectRangeState(e);return t!==n.INSIDE&&(e.velocity=0,e.acceleration=0,t===n.OUTSIDE_HIGH?e.position=this._range[1]:e.position=this._range[0]),e};var s=function(e,t){i.call(this,t),this._timingsrc=null,this.timingsrc=e};return r(s,i),Object.defineProperty(s.prototype,"timingsrc",{get:function(){return this._timingsrc},set:function(e){this._timingsrc&&this._timingsrc.off("change",this._preProcessWrapper),this._range=null,this._vector=null,this._clearTimeout(),clearTimeout(this._tid),this._timingsrc=e,this._timingsrc.on("change",this._preProcessWrapper,this)}}),s.prototype.update=function(e,t,n){return this.timingsrc.update(e,t,n)},s.prototype._getRange=function(){return this.timingsrc.range},s.prototype._preProcessWrapper=function(){var e=this.timingsrc.vector;this._preProcess(e)},{TimingBase:i,WrapperBase:s,STATE:n,inherit:r,motionutils:t}}),n("timingobject/rangewrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.STATE,i=e.inherit,s=function(){var e=r.INIT,t=function(e,t){return e===r.OUTSIDE_HIGH&&t===r.OUTSIDE_LOW?!1:e===r.OUTSIDE_LOW&&t===r.OUTSIDE_HIGH?!1:e===r.INIT?!1:!0},n=function(){return e},i=function(n){if(n===r.INSIDE||n===r.OUTSIDE_LOW||n===r.OUTSIDE_HIGH)if(n!==e){var i=e;return e=n,{real:t(i,n),abs:!0}}return{real:!1,abs:!1}};return{get:n,set:i}},o=function(e,t){n.call(this,e,{timeout:!0}),this._state=s(),this._range=t};return i(o,n),o.prototype.query=function(){if(this.vector===null)return null;var e=t.calculateVector(this.timingsrc.vector),n=this._getCorrectRangeState(e);return n!==r.INSIDE&&this._preProcess(e),t.calculateVector(this.vector)},o.prototype._calculateTimeoutVector=function(){var e=this.timingsrc.query(),n=t.calculateDelta(e,this.range),r=n[0];if(r===null)return null;var i=n[1],s=t.calculateVector(e,e.timestamp+r);return s.position=i,s},o.prototype._onTimeout=function(e){return this._onChange(e)},o.prototype._onChange=function(e){var t=this._getCorrectRangeState(e),n=this._state.set(t);if(n.real)this._state.get()!==r.INSIDE&&(e=this._checkRange(e));else if(this._state.get()!==r.INSIDE){if(!n.abs)return null;e=this._checkRange(e)}return e},o}),n("timingobject/positionshiftwrapper",["./timingbase","./rangewrapper"],function(e,t){"use strict";var n=e.motionutils,r=e.WrapperBase,i=e.inherit,s=function(e,t){this._offset=t,r.call(this,e)};return i(s,r),s.prototype._getRange=function(){var e=this.timingsrc.range;return e[0]=e[0]===-Infinity?e[0]:e[0]+this._offset,e[1]=e[1]===Infinity?e[1]:e[1]+this._offset,e},s.prototype._onChange=function(e){return e.position+=this._offset,e},s.prototype.update=function(e){return e.position!==undefined&&e.position!==null&&(e.position=e.position-this._offset),this.timingsrc.update(e)},s}),n("timingobject/delaywrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.inherit,i=function(e,t){if(t<0)throw new Error("negative delay not supported");if(t===0)throw new Error("zero delay makes delaywrapper pointless");n.call(this,e),this._delay=t};return r(i,n),i.prototype._onChange=function(e){var n=t.secClock()-e.timestamp;e.timestamp+=this._delay;if(n<this._delay){var r=this,i=(this._delay-n)*1e3;return setTimeout(function(){r._process(e)},i),null}return e},i.prototype.update=function(e){throw new Error("update is not legal on delayed (non-live) timingobject")},i}),n("timingobject/scalewrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.inherit,i=function(e,t){this._factor=t,n.call(this,e)};return r(i,n),i.prototype._getRange=function(){var e=this.timingsrc.range;return[e[0]*this._factor,e[1]*this._factor]},i.prototype._onChange=function(e){return e.position=e.position*this._factor,e.velocity=e.velocity*this._factor,e.acceleration=e.acceleration*this._factor,e},i.prototype.update=function(e){return e.position!==undefined&&e.position!==null&&(e.position=e.position/this._factor),e.velocity!==undefined&&e.velocity!==null&&(e.velocity=e.velocity/this._factor),e.acceleration!==undefined&&e.acceleration!==null&&(e.acceleration=e.acceleration/this._factor),this.timingsrc.update(e)},i}),n("timingobject/loopwrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.inherit,i=function(e,t){this.skew=e,this.length=t};i.mod=function(e,t){return(e%t+t)%t},i.prototype.getPoint=function(e){return{n:Math.floor((e-this.skew)/this.length),offset:i.mod(e-this.skew,this.length)}},i.prototype.getFloat=function(e){return this.skew+e.n*this.length+e.offset},i.prototype.transformFloat=function(e,t){t=t===undefined?this.skew:t;var n=this.getPoint(e),r=this.getPoint(t);return this.getFloat({n:r.n,offset:n.offset})};var s=function(e,t){n.call(this,e,{timeout:!0}),this._range=t,this._coords=new i(t[0],t[1]-t[0])};return r(s,n),s.prototype._transform=function(e){return this._coords.transformFloat(e)},s.prototype._inverse=function(e){var t=this.query().position,n=this.timingsrc.query().position,r=e-t,i=r+n;return i},s.prototype.query=function(){if(this.vector===null)return null;var e=t.calculateVector(this.vector);if(e.position>this._range[1])e.position=this._range[0],this._main(e);else{if(!(e.position<this._range[0]))return e;e.position=this._range[1],this._main(e)}return t.calculateVector(this.vector)},s.prototype.update=function(e){return e.position!==undefined&&e.position!==null&&(e.position=this._inverse(e.position)),this.timingsrc.update(e)},s.prototype._calculateTimeoutVector=function(){var e=this.query(),n=t.calculateDelta(e,this.range),r=n[0];if(r===null)return null;var i=n[1],s=t.calculateVector(e,e.timestamp+r);return s.position=i,s},s.prototype._onTimeout=function(e){return e.position>=this._range[1]?e.position=this._range[0]:e.position<=this._range[0]&&(e.position=this._range[1]),e},s.prototype._onChange=function(e){return e.position=this._transform(e.position),e},s}),n("timingobject/timeshiftwrapper",["./timingbase","./rangewrapper"],function(e,t){"use strict";var n=e.motionutils,r=e.WrapperBase,i=e.inherit,s=function(e,t){r.call(this,e),this._timeOffset=t};i(s,r),s.prototype._onChange=function(e){var t=n.calculateVector(e,e.timestamp+this._timeOffset);return t.timestamp=e.timestamp,t};var o=function(e,n,r){return r=r||e.range,new t(new s(e,n),r)};return o}),n("timingobject/localwrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.inherit,i=function(e){n.call(this,e),this._speculative=!1};return r(i,n),i.prototype.update=function(e){var t=this.timingsrc.update(e);this._speculative=!0;var n=this;return setTimeout(function(){n._preProcess(t)},0),t},i.prototype._onChange=function(e){return this._speculative&&(this._speculative=!1),e},i}),n("timingobject/derivativewrapper",["./timingbase"],function(e){"use strict";var t=e.motionutils,n=e.WrapperBase,r=e.inherit,i=function(e,t){n.call(this,e)};return r(i,n),i.prototype._getRange=function(){return[-Infinity,Infinity]},i.prototype._onChange=function(e){var t={position:e.velocity,velocity:e.acceleration,acceleration:0,timestamp:e.timestamp};return t},i.prototype.update=function(e){throw new Error("updates illegal on derivative of timingobject")},i}),n("timingobject/timingobject",["./timingbase","./positionshiftwrapper","./delaywrapper","./scalewrapper","./loopwrapper","./rangewrapper","./timeshiftwrapper","./localwrapper","./derivativewrapper"],function(e){"use strict";var t=e.motionutils,n=e.TimingBase,r=e.STATE,i=e.inherit,s=function(e,r){n.call(this,{timeout:!0}),this._vector={position:0,velocity:0,acceleration:0,timestamp:t.secClock()},r&&(r.position===null&&(r.position=undefined),r.velocity===null&&(r.velocity=undefined),r.acceleration===null&&(r.acceleration=undefined),r.position!==undefined&&(this._vector.position=r.position),r.velocity!==undefined&&(this._vector.velocity=r.velocity),r.acceleration!==undefined&&(this._vector.acceleration=r.acceleration)),this._range=e!==undefined?e:[-Infinity,Infinity],this._vector=this._checkRange(this._vector)};return i(s,n),s.prototype.query=function(){if(this.vector===null)return null;var e=t.calculateVector(this.vector),n=this._getCorrectRangeState(e);return n!==r.INSIDE&&this._preProcess(e),t.calculateVector(this.vector)},s.prototype.update=function(e){if(e===undefined||e===null)throw new Error("drop update, illegal updatevector");var n=e.position===undefined||e.position===null?undefined:e.position,r=e.velocity===undefined||e.velocity===null?undefined:e.velocity,i=e.acceleration===undefined||e.acceleration===null?undefined:e.acceleration;if(n===undefined&&r===undefined&&i===undefined)throw new Error("drop update, noop");var s=t.secClock(),o=t.calculateVector(this.vector,s),u=o.position,a=o.velocity,f=o.acceleration;n=n!==undefined?n:u,r=r!==undefined?r:a,i=i!==undefined?i:f;if(n===u&&r===a&&i===f)return;var l={position:n,velocity:r,acceleration:i,timestamp:s},c=this;return setTimeout(function(){c._preProcess(l)},0),l},s.prototype._onChange=function(e){return this._checkRange(e)},s.prototype._calculateTimeoutVector=function(){var e=this.query(),n=t.calculateDelta(e,this.range),r=n[0];if(r===null)return null;var i=n[1],s=t.calculateVector(e,e.timestamp+r);return s.position=i,s},s.prototype._onTimeout=function(e){return this._checkRange(e)},s}),n("timingobject/main",["./timingbase","./positionshiftwrapper","./delaywrapper","./scalewrapper","./loopwrapper","./rangewrapper","./timeshiftwrapper","./localwrapper","./derivativewrapper","./timingobject"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return{motionutils:e.motionutils,inherit:e.inherit,WrapperBase:e.WrapperBase,PositionShiftWrapper:t,DelayWrapper:n,ScaleWrapper:r,LoopWrapper:i,RangeWrapper:s,TimeShiftWrapper:o,LocalWrapper:u,DerivativeWrapper:a,TimingObject:f}}),n("timingsrc",["./timingobject/main"],function(e){return{motionutils:e.motionutils,inherit:e.inherit,WrapperBase:e.WrapperBase,PositionShiftWrapper:e.PositionShiftWrapper,DelayWrapper:e.DelayWrapper,ScaleWrapper:e.ScaleWrapper,LoopWrapper:e.LoopWrapper,RangeWrapper:e.RangeWrapper,TimeShiftWrapper:e.TimeShiftWrapper,LocalWrapper:e.LocalWrapper,DerivativeWrapper:e.DerivativeWrapper,TimingObject:e.TimingObject}}),t("timingsrc")});