<!DOCTYPE html>

<html>
<head>
  <!-- requirejs config -->
  <script>
    var require = {
      baseUrl : '../source',
    };
  </script>
  <script type="text/javascript" src="../lib/require.js"></script>
  <script type="text/javascript">
      var to;
      require(['timingsrc'], function (timingsrc) {
      
        var run = function () {

          // timing object
          to = new timingsrc.TimingObject([0,20]);
 
          // Hook up buttons UI
          document.getElementById('play').onclick = function () {to.update({velocity:1.0});};
          document.getElementById('pause').onclick = function () {to.update({velocity:0.0});};
          document.getElementById('reset').onclick = function () {to.update({position: 0.0, velocity:0.0});};
          document.getElementById('back').onclick = function () {to.update({velocity:-1.0});};
        
          // Hook up text UI
          var value = document.getElementById('value');
          to.on("timeupdate", function () {
            value.innerHTML = to.query().position.toFixed(2); 
          });


          var timeout = new timingsrc.SetTimingCallback(to, function () {
            console.log("timeout", to.query().position.toFixed(2));
          }, 4, {repeat:true});

                    
        };
        if (document.readyState === "complete") run();
        else window.onload = run;
      });
</script>
</head>
<body>
<h1>Test Timing Callbacks</h1>
<div id="value"></div>
<button id="play">Play</button>
<button id="pause">Pause</button>
<button id="reset">Reset</button>
<button id="back">Back</button>

</body>
</html>
